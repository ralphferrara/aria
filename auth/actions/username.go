//||------------------------------------------------------------------------------------------------||
//|| GenerateUsername: Creates a Unique Random Username
//||------------------------------------------------------------------------------------------------||

package actions

import (
	"github.com/ralphferrara/aria/app"
	"github.com/ralphferrara/aria/auth/db"
	"github.com/ralphferrara/aria/base/random"
)

//||------------------------------------------------------------------------------------------------||
//|| GenerateUsername
//||------------------------------------------------------------------------------------------------||

func GenerateUsername() (string, error) {
	for i := 0; i < 5; i++ {
		//||------------------------------------------------------------------------------------------------||
		//|| Generate Random Username
		//||------------------------------------------------------------------------------------------------||
		username := random.RandomString(12)
		exists := db.CheckUsernameExists(username)
		if exists == false {
			return username, nil
		}
	}
	//||------------------------------------------------------------------------------------------------||
	//|| Success
	//||------------------------------------------------------------------------------------------------||
	return "", app.Err("Auth").Error("USERNAME_GEN_FAILED")
}
